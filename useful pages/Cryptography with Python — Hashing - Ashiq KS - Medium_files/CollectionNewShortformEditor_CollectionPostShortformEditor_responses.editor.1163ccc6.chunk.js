(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./src/components/editor/EditorActions.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(r),i=n("./node_modules/react/index.js"),o=[{children:[{text:""}]}],c=i.createContext({}),s=function(e){var t=e.children,n=e.initialValue,r=i.useState(null),s=a()(r,2),u=s[0],l=s[1],d=i.useState(null),p=a()(d,2),f=p[0],m=p[1],h=i.useState(n||o),g=a()(h,2),v=g[0],b=g[1];return i.createElement(c.Provider,{value:{mode:f,setMode:m,backgroundSelection:u,setBackgroundSelection:l,value:v,setValue:b,clearValue:function(){b(o)}}},t)},u=function(){return i.useContext(c)}},"./src/components/editor/EditorBody.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/is-hotkey/lib/index.js"),a=n.n(r),i=n("./node_modules/react/index.js"),o=n("./node_modules/slate/dist/index.es.js"),c=n("./node_modules/slate-react/dist/index.es.js"),s=n("./src/components/editor/editorHelpers.tsx"),u=function(e){var t=e.renderElement,n=e.renderLeaf,r=e.onKeyDown,u=void 0===r?function(){}:r,l=e.decorate,d=e.editor,p=e.placeholder,f=void 0===p?"Share your thoughts...":p,m=i.useCallback((function(e){d&&""===o.c.string(d)&&a()("backspace",e)&&Object(s.b)(d),u(e)}),[d,u]);return i.createElement(c.a,{renderElement:t,renderLeaf:n,placeholder:f,onKeyDown:m,decorate:l})}},"./src/components/editor/EditorWrapper.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js"),a=n("./node_modules/slate-react/dist/index.es.js"),i=n("./src/components/editor/EditorActions.tsx"),o=function(e){var t=e.children,n=e.editor,o=Object(i.b)(),c=o.setValue,s=o.value;return s&&c?r.createElement(a.c,{editor:n,value:s,onChange:c},t):null}},"./src/components/editor/editorHelpers.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return x})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return w})),n.d(t,"h",(function(){return E})),n.d(t,"k",(function(){return O})),n.d(t,"d",(function(){return N})),n.d(t,"j",(function(){return P})),n.d(t,"i",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return D}));var r,a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),i=n.n(a),o=(n("./node_modules/@babel/runtime/helpers/defineProperty.js"),n("./node_modules/@babel/runtime/helpers/slicedToArray.js")),c=n.n(o),s=n("./node_modules/lodash/flattenDeep.js"),u=n.n(s),l=n("./node_modules/graphql-tag/src/index.js"),d=n.n(l),p=n("./node_modules/slate/dist/index.es.js"),f=n("./src/schema-types/globalTypes.ts");function m(){var e=i()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}!function(e){e[e.Link=0]="Link"}(r||(r={}));var h=["numbered-list","bulleted-list","bq"];function g(e){if(!e.children)return[];if(e.children.every((function(e){return function(e){return p.h.isText(e)||"link"===e.type}(e)}))){var t=p.c.string(e),n=!(null==e?void 0:e.name),r=n?y():e.name,a=function(e){switch(e){case"oli":return 10;case"uli":return 9;case"bq-line":return 6;case"image":return 4;case"title":return 3;default:return 1}}(e.type);if("image"===e.type)return[{type:n?1:3,paragraph:{name:r,type:a,text:t,markups:[],layout:1,metadata:{id:e.imageProps.miroId,originalWidth:e.imageProps.width,originalHeight:e.imageProps.height}},verifySameName:!n}];if(!t.length&&!e.name)return[];if(!t.length&&e.name)return[{type:2,paragraph:{name:e.name}}];var i=e.children.reduce((function(e,t){var n=c()(e,2),r=n[0],a=n[1],i=p.c.string(t).length;return t.italic&&a.push({type:2,start:r,end:r+i}),t.bold&&a.push({type:1,start:r,end:r+i}),"link"===t.type&&a.push({type:3,start:r,end:r+i,href:t.url,title:"",rel:"",anchorType:0}),[r+i,a]}),[0,[]]);return[{type:n?1:3,paragraph:{markups:c()(i,2)[1],name:r,text:t,type:a},verifySameName:!n}]}return u()(e.children.map(g).filter((function(e){return e.length})))}function v(e,t){return e.map((function(e,n){return e.index=n+t,e}))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[];if(n){var a=y();r=[{type:8,index:0,section:{name:a,startIndex:0}}]}var i=e.children,o=0;if(!i[0].name&&"title"!==i[0].type){var c=y();r.push({type:1,index:0,paragraph:{name:c,type:3,text:"",markups:[]}}),o=1}var s=g(e),u=v(s,o);return r.concat(u)}function y(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")}var x=function(e,t){e.selection&&w(e,t)},j=function(e,t){var n=t||e.selection;p.i.unwrapNodes(e,{match:function(e){return"link"===e.type},at:n})},w=function(e,t){(function(e){var t=p.a.nodes(e,{match:function(e){return"link"===e.type}});return!!c()(t,1)[0]})(e)&&j(e);var n=e.selection,r=n&&p.g.isCollapsed(n),a={type:"link",url:t,children:r?[{text:t}]:[]};r?p.i.insertNodes(e,a):(p.i.wrapNodes(e,a,{split:!0}),p.i.collapse(e,{edge:"end"}))},E=function(e,t,n){var r=n||e.selection,a=p.a.nodes(e,{match:function(e){return!0===e[t]||e.type===t},at:r,mode:"all"});return!!c()(a,1)[0]},O=function(e,t){E(e,t)?p.a.removeMark(e,t):p.a.addMark(e,t,!0)},k=function(e){switch(e){case"bq":return"bq-line";case"numbered-list":return"oli";case"bulleted-list":default:return"uli"}},N=function(){if("undefined"!=typeof window){var e=window.getSelection(),t=e&&!e.isCollapsed&&e.getRangeAt(0);return t&&t.getBoundingClientRect()}},P=function(e,t,n){var r=n||e.selection,a=E(e,t,n),i=h.includes(t),o=p.g.isRange(r)?p.a.rangeRef(e,r):p.f.isPoint(r)?p.a.pointRef(e,r):p.a.pathRef(e,r);if(p.i.unwrapNodes(e,{at:r,match:function(e){return h.includes(e.type)},split:!0}),o.current&&(p.i.setNodes(e,{type:a?"paragraph":i?k(t):t},{at:o.current}),!a&&i)){var c={type:t,children:[]};p.i.wrapNodes(e,c,{at:o.current})}},_=function(e,t){["bold","italic"].forEach((function(n){E(e,n,t)&&p.i.unsetNodes(e,n,{at:t})})),["link","numbered-list","bulleted-list","bq"].forEach((function(n){E(e,n,t)&&p.i.unwrapNodes(e,{at:t,match:function(e){return e.type===n}})}))},S=function(e){if(e){var t=function(e){if(!e||!e.children.length)return!1;var t=p.a.point(e,[0],{edge:"start"}),n=e.children.length;return{anchor:t,focus:p.a.point(e,[n-1],{edge:"end"})}}(e);t&&(p.i.removeNodes(e,{at:t}),p.i.insertNodes(e,{children:[{text:""}]}))}},T=d()(m()),D=function(e){return e.paragraphs.map((function(e){var t=e.markups,n=e.name,r=e.text;if(e.type===f.k.H3)return{children:[{text:r}],name:n,type:"title"};if(!(null==t?void 0:t.length))return{children:[{text:r}],name:n};var a=new Set;a.add(0),a.add(r.length),t.forEach((function(e){var t=e.start,n=e.end;a.add(t),a.add(n)}));var i=Array.from(a);return{children:i.sort((function(e,t){return e-t})).slice(1).map((function(e,n,a){var o=n?a[n-1]:i[0],c=e,s=t.filter((function(e){return e.start<=o&&c<=e.end})),u={text:r.substring(o,c)};return s.forEach((function(e){var t=e.href;switch(e.type){case f.i.STRONG:("link"===u.type?u.children[0]:u).bold=!0;break;case f.i.EM:("link"===u.type?u.children[0]:u).italic=!0;break;case f.i.A:u={type:"link",url:t,children:[u]}}})),u})),name:n}}))}},"./src/components/editor/useMediumEditor.tsx":function(e,t,n){"use strict";n.d(t,"d",(function(){return W})),n.d(t,"c",(function(){return F})),n.d(t,"j",(function(){return K})),n.d(t,"f",(function(){return Q})),n.d(t,"i",(function(){return X})),n.d(t,"e",(function(){return Y})),n.d(t,"h",(function(){return Z})),n.d(t,"b",(function(){return $})),n.d(t,"g",(function(){return te})),n.d(t,"a",(function(){return ae}));var r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),a=n.n(r),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(i),c=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(c),u=n("./node_modules/linkify-it/index.js"),l=n.n(u),d=n("./node_modules/react/index.js"),p=n.n(d),f=n("./node_modules/slate/dist/index.es.js"),m=n("./node_modules/slate-history/dist/index.es.js"),h=n("./node_modules/slate-react/dist/index.es.js"),g=n("./src/components/ui/image/ProgressiveMiroImage.tsx"),v=n("./src/framework/design-system/components/index.ts"),b=n("./src/framework/style/index.ts"),y=n("./src/schema-types/globalTypes.ts"),x=n("./src/util/post/image.ts"),j=function(e){var t=Object(h.e)(),n=Object(h.d)(),r=Object(h.f)(),a=Object(b.useCx)(),i=e.ParagraphWrapper;switch(e.element.type){case"link":return d.createElement("span",e.attributes,d.createElement(v.t,{linkStyle:"OBVIOUS",cursor:"text",inline:!0,href:e.element.url},e.children));case"numbered-list":return d.createElement("ol",e.attributes,e.children);case"bulleted-list":return d.createElement("ul",e.attributes,e.children);case"bq":return d.createElement("div",e.attributes,d.createElement(i,s()({},e,{editor:r}),e.children));case"image":var o=Object(x.b)({layout:y.f.FULL_WIDTH,originalWidth:e.element.imageProps.width,originalHeight:e.element.imageProps.height}),c=o.width,u=o.strategy,l=o.otherWidths;return d.createElement("div",s()({},e.attributes,{className:a({margin:"20px 0 10px"})}),d.createElement("div",{contentEditable:!1,className:a({boxShadow:"".concat(t&&n?"0 0 0 3px #03a87c":"none")})},d.createElement(g.a,{maxWidth:"100%",miroId:e.element.imageProps.miroId,width:c,strategy:u,otherWidths:l})),e.children);default:return d.createElement("div",e.attributes,d.createElement(i,s()({},e,{editor:r}),e.children))}},w=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(w);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k=p.a.createElement("path",{d:"M20 12h-7V5h-1v7H5v1h7v7h1v-7h7",fillRule:"evenodd"}),N=function(e){return p.a.createElement("svg",O({className:"adder-25px_svg__svgIcon-use",width:25,height:25},e),k)};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=p.a.createElement("g",{fillRule:"evenodd"},p.a.createElement("path",{d:"M4.04 17.05v-8.2c0-1.08.84-1.84 1.94-1.84h2.45c.44-.75.81-2.01 1.17-2L15.4 5c.3 0 .76 1.32 1.18 2 0 .08 2.5 0 2.5 0 1.09 0 1.96.76 1.96 1.85v8.2c0 1.08-.87 1.94-1.97 1.94H5.97a1.9 1.9 0 0 1-1.93-1.94zM6.21 8a1.2 1.2 0 0 0-1.17 1.18v7.68c0 .63.55 1.15 1.17 1.15H18.9c.62 0 1.14-.53 1.14-1.15V9.17c0-.62-.52-1.17-1.14-1.17h-3.03c-.24-.63-.73-1.92-.87-2h-5c-.21.1-.87 2-.87 2H6.21z"}),p.a.createElement("path",{d:"M12.48 15.98A3.47 3.47 0 0 1 9 12.48 3.47 3.47 0 0 1 12.48 9a3.47 3.47 0 0 1 3.5 3.49 3.47 3.47 0 0 1-3.5 3.49zm0-6.08a2.62 2.62 0 0 0-2.59 2.59c0 1.4 1.19 2.59 2.6 2.59 1.4 0 2.58-1.19 2.58-2.6 0-1.4-1.18-2.58-2.59-2.58z"})),S=function(e){return p.a.createElement("svg",P({className:"camera-25px_svg__svgIcon-use",width:25,height:25},e),_)};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=p.a.createElement("g",{fillRule:"evenodd"},p.a.createElement("path",{d:"M8.45 12H5.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5H8.45zM17.45 12H14.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5h-2.25z"})),I=function(e){return p.a.createElement("svg",T({className:"section-25px_svg__svgIcon-use",width:25,height:25},e),D)},C=n("./src/util/hooks/useUploader.tsx");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e=Object(b.useCx)(),t=Object(h.f)(),n=d.useState(!1),r=o()(n,2),a=r[0],i=r[1],c=d.useCallback((function(){i(!a)}),[a]),s={borderRadius:"100%",border:"1px solid rgba(0,0,0,.68)",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},u=Object(C.b)((function(e,n){var r=n.height,a=n.width;$(t,{miroId:e.value.fileId,width:a,height:r})}),(function(){})),l=u.inputRef,p=u.fireClick,f=d.useCallback((function(){c(),p()}),[p]);return d.createElement("div",{className:e({position:"relative",top:"-3px"})},d.createElement("div",{className:e({position:"absolute",left:"-55px",display:"flex",backgroundColor:a?"white":"transparent",transition:"background-color 0.25s, padding 0.25s",zIndex:"10",padding:a?"5px 200px 5px 5px":"5px"})},d.createElement("div",{className:e(R({},s,{transform:a?"rotate(45deg)":"",transition:"transform 0.25s"})),onClick:c},d.createElement(N,null)),d.createElement("div",{className:e(R({},s,{marginLeft:a?"32px":"0px",transform:a?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"})),onClick:f},d.createElement(S,null)),d.createElement("div",{className:e(R({},s,{marginLeft:a?"10px":"0px",transform:a?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"}))},d.createElement(I,null))),d.createElement("input",{type:"file",ref:l,className:e({display:"none"})}))},M=n("./src/components/editor/editorHelpers.tsx"),U=n("./src/components/post/grouping/ParagraphStyleGrouping.tsx"),B=n("./src/components/post/paragraph/TextParagraph.tsx"),z=n("./src/styles/post/spacing.ts"),H=n("./src/util/richText.ts"),q=l()(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.useMemo((function(){var t=J(Object(m.a)(Object(h.g)(Object(f.j)())));return e.reduce((function(e,t){return t(e)}),t)}),[]),r=d.useCallback((function(e){return d.createElement(G,e)}),[]),a=t.ParagraphWrapper||re,i=function(e){return d.createElement(j,s()({},e,{ParagraphWrapper:a}))};return{editor:n,renderLeaf:r,renderElement:i}},G=function(e){var t=e.attributes,n=e.children,r=e.leaf;return r.bold&&(n=d.createElement("strong",null,n)),r.italic&&(n=d.createElement("em",null,n)),d.createElement("span",t,n)},V=function(e){var t=q.match(e)||[],n=o()(t,1)[0];return!!n&&n.raw===e},F=function(e){var t=q.match(e)||[],n=o()(t,1)[0];return n&&n.raw===e?n.url:null},J=function(e){var t=e.isInline,n=e.isVoid;return e.isVoid=function(e){return n(e)},e.isInline=function(e){return"link"===e.type||t(e)},e},K=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=o()(n,2),a=r[0],i=r[1];"title"===a.type&&0!==i[0]&&Object(M.j)(e,"title",i),"title"===a.type&&a.children.forEach((function(t,n){var r=i.concat(n);Object(M.i)(e,r)})),t([a,i])},e},Q=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=o()(n,2),a=r[0],i=r[1],c=!a.type||"paragraph"===a.type,s=a.children&&1===a.children.length&&f.h.isText(a.children[0])&&("- "===f.c.string(a)||"* "===f.c.string(a));c&&s&&f.a.withoutNormalizing(e,(function(){f.i.insertFragment(e,[{text:""}],{at:i}),f.i.delete(e,{at:i.concat(1)}),Object(M.j)(e,"bulleted-list",i)}));var u=a.children&&1===a.children.length&&f.h.isText(a.children[0])&&"1. "===f.c.string(a);c&&u&&f.a.withoutNormalizing(e,(function(){f.i.insertFragment(e,[{text:""}],{at:i}),f.i.delete(e,{at:i.concat(1)}),Object(M.j)(e,"numbered-list",i)})),t([a,i])},e},X=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=o()(n,2),a=r[0],i=r[1];if("bulleted-list"===a.type||"numbered-list"===a.type||"bq"===a.type){var c=a.children.length;if(c>1)if(a.children.slice(-2,-1).every((function(e){return""===f.c.string(e)}))){var s=c-2;f.i.removeNodes(e,{at:i.concat(s)}),f.i.setNodes(e,{type:"paragraph"},{at:i.concat(s)}),f.i.liftNodes(e,{at:i.concat(s)})}}t([a,i])},e},Y=function(e){var t=e.insertData,n=e.insertText;return e.insertText=function(t){t&&V(t)?Object(M.m)(e,t):n(t)},e.insertData=function(n){var r=n.getData("text/plain");r&&V(r)?Object(M.m)(e,r):t(n)},e},Z=function(e){var t=e.insertData,n=e.insertBreak,r=e.isVoid;return e.isVoid=function(e){return"image"===e.type||r(e)},e.insertBreak=function(){var t=f.a.parent(e,e.selection),r=o()(t,2),a=r[0],i=r[1];if(f.a.after(e,e.selection)||"image"!==a.type)n();else{var c=f.e.next(i);f.i.insertNodes(e,{children:[{text:""}]},{at:c,voids:!0}),f.i.select(e,c)}},e.insertData=function(e){var n=e.getData("text/plain"),r=e.files;if(r&&r.length>0){var a=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var l=s.value,d=new FileReader,p=l.type.split("/");"image"===o()(p,1)[0]&&(d.addEventListener("load",(function(){})),d.readAsBinaryString(l))}}catch(e){i=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}else(function(e){if(!e)return!1;if(!V(e))return!1;var t=new URL(e).pathname.split(".").pop();return!!t&&["jpg","JPG","png","PNG","jpeg","JPEG"].includes(t)})(n)||t(e)},e},$=function(e,t){var n={type:"image",imageProps:t,children:[{text:""}]};f.i.insertNodes(e,n)};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.selection,r=n.anchor,a=f.a.before(e,r,{distance:t});if(!a)return"";var i={anchor:a,focus:n.anchor};return f.a.string(e,i)}var te=function(e){var t=e.insertText;return e.insertText=function(n){var r=e.selection;if(r&&f.g.isCollapsed(r)){var a=ee(e,1);if("-"===n&&"-"===a)return f.a.deleteBackward(e),t("—");if(">"===n&&"-"===a)return f.a.deleteBackward(e),t("→");if("-"===n&&"<"===a)return f.a.deleteBackward(e),t("←");if('"'===n&&a.match(/\S/))return t("”");if("'"===n&&a.match(/\S/))return t("’");if("'"===n)return t("‘");if('"'===n&&!a.match(/\S/))return t("“");var i=ee(e,2);if("."===n&&".."===i)return f.a.deleteBackward(e),f.a.deleteBackward(e),t("…")}t(n)},e},ne={title:H.a.Title,oli:H.a.OLI,uli:H.a.ULI,bq:H.a.BQ},re=function(e){return d.createElement("p",null,e.children)},ae=function(e){var t=e.editor,n=a()(e,["editor"]),r=d.useRef(null),i=f.c.first(t,[0])[0]===n.element.children[0],o=ne[n.element.type]||y.k.P,c=function(e,t){switch(t){case"title":return 10;case"oli":case"uli":case"bq-line":return e?z.h:z.g;default:return e?z.h:z.e}}(i,n.element.type),s=Object(b.useCx)(),u=Object(h.e)()&&0===f.c.string(n.element).length;if("bq"===n.element.type){var l=s(Object(U.f)({paragraphStyle:y.k.BQ,topSpacing:0,paragraphLayout:y.f.FULL_WIDTH,paragraphCount:0,richTextStyle:"CARD",isEmbedded:!1}));return d.createElement("blockquote",{className:l},n.children)}return d.createElement("div",null,u&&d.createElement(A,null),d.createElement(B.f,{hasDropCap:!1,name:"",paragraphRef:r,paragraphStyle:o,richTextStyle:"CARD",spaceTop:c},n.children))}},"./src/util/hooks/useUploader.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return m}));var r,a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),o=n("./node_modules/@babel/runtime/regenerator/index.js"),c=n.n(o),s=n("./node_modules/isomorphic-fetch/fetch-npm-browserify.js"),u=n.n(s),l=n("./node_modules/react/index.js"),d=n("./src/routes/RoutingContext.tsx");!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(r||(r={}));var p=function(e){return new Promise((function(t){return setTimeout(t,e)}))},f=function(e,t){var n,r,a;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return(n=new FormData).append("uploadedFile",t),i.next=4,c.a.awrap(u()(e,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:n}));case 4:return r=i.sent,i.next=7,c.a.awrap(r.text());case 7:return a=i.sent,i.abrupt("return",JSON.parse(a.replace("])}while(1);</x>","")));case 9:case"end":return i.stop()}}))},m=function(e,t){var n=l.useState(r.NONE),a=i()(n,2),o=a[0],s=a[1],u=l.useRef(null),m=l.useCallback((function(){u.current&&u.current.click()}),[u]),h=Object(d.e)("CreateUpload");function g(){var n,a,i,o,u,l,d,m;return c.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return s(r.STARTING),g.next=3,c.a.awrap(p(0));case 3:if(s(r.UPLOADING),n=this.files,!(a=null==n?void 0:n[0])){g.next=20;break}if(g.prev=7,h){g.next=10;break}throw new Error("Expected ".concat("CreateUpload"," route to exist"));case 10:return g.next=12,c.a.awrap(f(h.pathPattern,a));case 12:o=g.sent,u=o.success,l=o.payload,u&&(null==l||null===(i=l.value)||void 0===i?void 0:i.md5)&&(d=URL.createObjectURL(a),(m=new Image).onload=function(){s(r.UPLOADED),e(l,{file:a,height:m.height,width:m.width},(function(){return s(r.NONE)}))},m.src=d),g.next=20;break;case 17:g.prev=17,g.t0=g.catch(7),t(g.t0);case 20:case"end":return g.stop()}}),null,this,[[7,17]])}return l.useEffect((function(){if(u.current)return u.current.addEventListener("change",g,!1),function(){u.current&&u.current.removeEventListener("change",g,!1)}}),[u.current]),{inputRef:u,fireClick:m,status:o}}}}]);
//# sourceMappingURL=CollectionNewShortformEditor~CollectionPostShortformEditor~responses.editor.1163ccc6.chunk.js.map